{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{424:function(e,t,n){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0});var a=p(n(27)),i=p(n(35));function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n(26),n(34);var s=n(20),l=n(24),d=n(25),r=n(22),c=n(21),u=p(n(29));function p(e){return e&&e.__esModule?e:{default:e}}var m=i.default.confirm,f=\"windLimitStandard.add\",h=\"windLimitStandard.edit\",g=\"windLimitStandard.del\",w=\"windLimitStandard.export\",b=(function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(y,e.Component),function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(y,[{key:\"componentDidMount\",value:function(){this.getList()}},{key:\"componentWillUnmount\",value:function(){this.setState=function(e,t){}}},{key:\"getSearchFormOptions\",value:function(){return[{type:\"Select\",label:\"机型\",name:\"eqpCd\",list:this.state.eqpCdList,span:6,length:2},{type:\"Select\",label:\"刹车效应\",name:\"brakeEffect\",list:this.state.brakeEffectList,span:6,length:4}]}},{key:\"getFormOptions\",value:function(){var e=this.state,t=e.currentAction,n=e.currentData,a=e.eqpCdList,i=e.brakeEffectList,o=\"add\"==t?{}:n,s=/^0$|^[1-9]\\d*$|^[1-9]\\d*.\\d{1,2}$|^0.\\d{1,2}$/,l=\"请输入数字，最多保留两位小数；如：0、5、5.1、5.11\",d=\"请输入数字，最多保留两位小数\";return[{type:\"Select\",label:\"机型\",name:\"eqpCd\",list:a,span:24,isHasAllSelect:!1,options:{initialValue:o.eqpCd,rules:[{required:!0,message:\"机型不可为空！\"}]}},{type:\"Select\",label:\"刹车效应\",name:\"brakeEffect\",list:i,span:24,isHasAllSelect:!1,options:{initialValue:o.brakeEffect,rules:[{required:!0,message:\"刹车效应不可为空！\"}]}},{type:\"Select\",label:\"Motne代码\",name:\"motneNo\",list:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"9\"],span:24,isHasAllSelect:!1,options:{initialValue:o.motneNo,rules:[{required:!0,message:\"Motne代码不可为空！\"}]}},{type:\"Select\",label:\"阶段类型\",name:\"stageType\",list:[\"人工起飞\",\"人工着陆\",\"自动着陆\"],span:24,isHasAllSelect:!1,options:{initialValue:o.stageType,rules:[{required:!0,message:\"阶段类型不可为空！\"}]}},{type:\"Input\",label:\"侧风范围最小值\",name:\"sideWindMin\",span:24,placeholder:d,options:{initialValue:o.sideWindMin,rules:[{pattern:s,message:l}]}},{type:\"Input\",label:\"侧风范围最大值\",name:\"sideWindMax\",span:24,placeholder:d,options:{initialValue:o.sideWindMax,rules:[{pattern:s,message:l}]}},{type:\"Input\",label:\"顺风范围最小值\",name:\"tailWindMin\",span:24,placeholder:d,options:{initialValue:o.tailWindMin,rules:[{pattern:s,message:l}]}},{type:\"Input\",label:\"顺风范围最大值\",name:\"tailWindMax\",span:24,placeholder:d,options:{initialValue:o.tailWindMax,rules:[{pattern:s,message:l}]}},{type:\"Input\",label:\"顶风范围最小值\",name:\"againstWindMin\",span:24,placeholder:d,options:{initialValue:o.againstWindMin,rules:[{pattern:s,message:l}]}},{type:\"Input\",label:\"顶风范围最大值\",name:\"againstWindMax\",span:24,placeholder:d,options:{initialValue:o.againstWindMax,rules:[{pattern:s,message:l}]}}]}},{key:\"render\",value:function(){var t=this,n=this.state,a=n.table,i=n.modalOkBtnLoading,o=n.currentAction,s=n.selectedRowKeys,l=n.authorityList,c=this.getSearchFormOptions(),u={aligin:\"left\",span:6,list:[{text:\"查询\",options:\"queryOpt\",event:this.search}]},p={table:a,onChange:this.getList,columns:this.columns,scroll:{x:\"max-content\"},rowSelection:{selectedRowKeys:s,onChange:function(e,n){t.onChecked(e,n)},onSelect:r.onSelect.bind(this),onSelectAll:r.onSelectAll.bind(this)}},m={options:{title:\"add\"==o?\"新增\":\"edit\"==o?\"修改\":\"\",bodyStyle:{height:\"400px\",overflowY:\"auto\"},okButtonProps:{loading:i}},onRef:function(e){t.modal=e},ok:this.submit.bind(this)},f=this.getFormOptions();return e.createElement(d.CardCommon,null,l&&e.createElement(d.CommonForm,{options:c,btnOptions:u,wrappedComponentRef:function(e){e&&e.props&&e.props.form&&(t.searcForm=e.props.form)}}),e.createElement(\"div\",{className:\"buttons\"},e.createElement(d.CommonBtns,{options:{shape:\"round\",size:\"small\"},btns:this.state.btns})),l&&e.createElement(d.CommonTable,{options:p,onChecked:this.onChecked}),!l&&e.createElement(\"div\",{className:\"no-authority-box\"},\"无权限查看\"),e.createElement(d.CommonModal,m,e.createElement(\"div\",{className:\"form-grid-7\",style:{paddingLeft:\"50px\",paddingRight:\"70px\"}},e.createElement(d.CommonForm,{options:f,wrappedComponentRef:function(e){e&&e.props&&e.props.form&&(t.form=e.props.form)}}))))}}]),y);function y(e){!function(e,t){if(!(e instanceof y))throw new TypeError(\"Cannot call a class as a function\")}(this);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,e));return t.getList=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.state.table;n.setPage(e);var a=n.getParmaData();(0,c.post)({url:\"windLimitStandard/queryByParam\",data:a,success:function(e){if(e&&e.rows){var i=e.rows.map(function(e,t){return e.index=(a.pageNum-1)*a.pageSize+t+1,e});n.setPage({dataList:i,total:e.total,pageNum:a.pageNum,pageSize:a.pageSize}),t.setState({table:n,selectedRowKeys:[],selectedRows:[]})}}})},t.onChecked=function(e,n){t.setState({selectedRowKeys:e,selectedRows:n})},t.search=function(){t.searcForm.validateFields(function(e,n){e||(n=(0,r.handleInParams)(n),t.getList({params:n,pageNum:1}))})},t.add=function(e){e(),t.setState({currentAction:\"add\"}),t.modal.show()},t.edit=function(e){0==t.state.selectedRows.length?(e(),a.default.warning(\"必须选择一个选项才能编辑！\")):1<t.state.selectedRows.length?(e(),a.default.warning(\"只能选择一个选项！\")):(e(),t.setState({currentAction:\"edit\",currentData:t.state.selectedRows[0]}),t.modal.show())},t.submit=function(){t.setState({modalOkBtnLoading:!0}),t.form.validateFields(function(e,n){var i,o;e?t.setState({modalOkBtnLoading:!1}):(n=(0,r.handleInParams)(n),o=\"add\"==t.state.currentAction?(i=\"windLimitStandard/insert\",\"添加成功\"):(n.id=t.state.currentData.id,i=\"windLimitStandard/update\",\"修改成功\"),(0,c.post)({url:i,data:n,btn:function(){return t.setState({modalOkBtnLoading:!1})},success:function(e){a.default.success(o),t.modal.hide(),t.getList({pageNum:1})}}))})},t.del=function(e){if(0==t.state.selectedRows.length)e(),a.default.warning(\"请至少选择一行数据\");else{var n=t.state.selectedRows.map(function(e){return e.id});m({title:\"确认删除选中项目吗?\",okType:\"danger\",onOk:function(){(0,c.post)({url:\"windLimitStandard/delete\",data:{ids:n},btn:e,success:function(e){a.default.success(\"删除成功\"),t.getList({pageNum:1})}})},onCancel:e})}},t.export=function(e){if(0==t.state.selectedExport.length)e(),a.default.warning(\"未选中选项\");else{var n=t.state.selectedExport.map(function(e){return e.id}),i=t.state.selectedExport.map(function(e){return e.eqpCd});m({title:\"确定导出\"+i.join(\"、\")+\"机型风限制标准维护吗？\",onOk:function(){(0,c.post)({url:\"windLimitStandard/export\",data:{ids:n},btn:e,success:function(e){(0,r.downloadFile)(e,\"风节点表\")}})},onCancel:e})}},t.exportAll=function(e){var n=t;m({title:\"确定导出全部机型风限制标准维护吗？\",onOk:function(){var t=(0,r.handleInParams)(n.searcForm.getFieldsValue());(0,c.post)({url:\"windLimitStandard/export\",data:t,btn:e,success:function(e){(0,r.downloadFile)(e,\"风节点表\")}})},onCancel:e})},t.state={table:new u.default,selectedRowKeys:[],selectedRows:[],selectedExport:[],btns:[{name:\"新增\",id:f,icon:\"plus-circle\",onClick:t.add},{name:\"修改\",id:h,icon:\"edit\",onClick:t.edit},{name:\"删除\",id:g,icon:\"minus-circle\",onClick:t.del},{name:\"导出\",id:w,icon:\"export\",onClick:t.export},{name:\"导出全部\",id:w,icon:\"export\",onClick:t.exportAll}].filter(function(t){return(0,r.isAuthority)(t.id,e.authority)}),authorityList:(0,r.isAuthority)(\"windLimitStandard.list\",e.authority),modalOkBtnLoading:!1,currentAction:\"\",currentData:{},eqpCdList:[\"B777\",\"B737\",\"B747\",\"A320/A319/A321\",\"A320(neo)\",\"A330\",\"A321(neo)\",\"B787-8\",\"B787-9\",\"A380\",\"E190\"],brakeEffectList:[\"劣\",\"差\",\"中到差\",\"中\",\"中到好\",\"好\",\"好且干\"]},t.columns=[{title:\"序号\",dataIndex:\"index\",width:50},{title:\"机型\",dataIndex:\"eqpCd\",width:150},{title:\"阶段类型\",dataIndex:\"stageType\",width:100},{title:\"刹车效应\",dataIndex:\"brakeEffect\",width:100},{title:\"Motne代码\",dataIndex:\"motneNo\",width:100},{title:\"侧风范围最小值\",dataIndex:\"sideWindMin\",width:120},{title:\"侧风范围最大值\",dataIndex:\"sideWindMax\",width:120},{title:\"顺风范围最小值\",dataIndex:\"tailWindMin\",width:120},{title:\"顺风范围最大值\",dataIndex:\"tailWindMax\",width:120},{title:\"顶风范围最小值\",dataIndex:\"againstWindMin\",width:120},{title:\"顶风范围最大值\",dataIndex:\"againstWindMax\",width:120},{title:\"更新人\",dataIndex:\"updateUser\",width:100},{title:\"更新时间\",dataIndex:\"updateTime\",width:150}],t.modal,t.form,t}t.default=(0,l.connect)(function(e){return{authority:e.authority}})((0,s.withRouter)(b))}).call(this,n(1))}}]);","extractedComments":[]}