{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{430:function(e,t,n){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0});var o=d(n(28)),a=d(n(36));function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n(27),n(35);var s=n(20),r=n(24),l=n(26),c=n(23),u=n(22),p=d(n(32));function d(e){return e&&e.__esModule?e:{default:e}}var m=a.default.confirm,f=(function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,e.Component),function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(h,[{key:\"componentDidMount\",value:function(){this.getList()}},{key:\"componentWillUnmount\",value:function(){this.setState=function(e,t){}}},{key:\"getSearchFormOptions\",value:function(){return[{type:\"Select\",label:\"权限类型\",name:\"type\",span:6,list:[{key:\"menu\",text:\"菜单\"},{key:\"permission\",text:\"权限\"}]},{type:\"Input\",label:\"权限名称\",name:\"name\",span:6}]}},{key:\"getFormOptions\",value:function(){var e=this.state,t=e.currentData,n=\"edit\"==e.currentAction?t:{};return[{type:\"Input\",label:\"权限名称\",name:\"name\",span:24,length:5,options:{initialValue:n.name}},{type:\"Input\",label:\"系统模块\",name:\"permGroup\",span:24,length:5,options:{initialValue:n.permGroup}},{type:\"Select\",label:\"权限类型\",name:\"type\",span:24,length:5,list:[{key:\"permission\",text:\"权限\"}],isHasAllSelect:!1,options:{initialValue:n.type}},{type:\"Input\",label:\"权限代码\",name:\"percode\",span:24,length:5,options:{initialValue:n.percode}},{type:\"Select\",label:\"权限状态\",name:\"available\",span:24,length:5,list:[{key:\"1\",text:\"启用\"},{key:\"0\",text:\"禁用\"}],isHasAllSelect:!1,options:{initialValue:n.available}}]}},{key:\"render\",value:function(){var t=this,n=this.state,o=n.table,a=n.currentAction,i=n.modalOkBtnLoading,s=n.btns,r=n.selectedRowKeys,c=n.authorityList,u=this.getSearchFormOptions(),p={aligin:\"left\",span:6,list:[{text:\"查询\",options:\"queryOpt\",event:this.search}]},d={columns:this.columns,table:o,rowSelection:{selectedRowKeys:r,onChange:function(e,n){t.onChecked(e,n)}},onChange:this.getList},m={options:{title:\"edit\"==a?\"编辑\":\"新增\",okButtonProps:{loading:i}},onRef:function(e){t.modal=e},ok:this.submit.bind(this)},f=this.getFormOptions();return e.createElement(l.CardCommon,null,c&&e.createElement(l.CommonForm,{options:u,btnOptions:p,wrappedComponentRef:function(e){e&&e.props&&e.props.form&&(t.searcForm=e.props.form)}}),e.createElement(\"div\",{className:\"buttons\"},e.createElement(l.CommonBtns,{options:{shape:\"round\",size:\"small\"},btns:s})),c&&e.createElement(l.CommonTable,{options:d,onChecked:this.onChecked}),!c&&e.createElement(\"div\",{className:\"no-authority-box\"},\"无权限查看\"),e.createElement(l.CommonModal,m,e.createElement(\"div\",{className:\"mb30\"},\"权限信息:\"),e.createElement(\"div\",{style:{paddingLeft:\"60px\",paddingRight:\"60px\"}},e.createElement(l.CommonForm,{options:f,wrappedComponentRef:function(e){e&&e.props&&e.props.form&&(t.form=e.props.form)}}))))}}]),h);function h(e){!function(e,t){if(!(e instanceof h))throw new TypeError(\"Cannot call a class as a function\")}(this);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,e));return t.getList=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.state.table;n.setPage(e);var o=n.getParmaData();(0,u.post)({url:\"sysPermission/querySysPermissionListByParam\",data:o,success:function(e){if(e&&e.rows){var a=e.rows.map(function(e,t){return e.index=(o.pageNum-1)*o.pageSize+t+1,e});n.setPage({dataList:a,total:e.total,pageNum:o.pageNum,pageSize:o.pageSize}),t.setState({table:n,selectedRowKeys:[],selectedRows:[]})}}})},t.onChecked=function(e,n){t.setState({selectedRowKeys:e,selectedRows:n})},t.search=function(){t.searcForm.validateFields(function(e,n){e||(n=(0,c.handleInParams)(n),t.getList({params:n,pageNum:1}))})},t.add=function(e){e(),t.setState({currentAction:\"add\"}),t.modal.show()},t.edit=function(e){0==t.state.selectedRows.length?(e(),o.default.warning(\"必须选择一个选项才能编辑！\")):1<t.state.selectedRows.length?(e(),o.default.warning(\"只能选择一个选项！\")):(e(),t.setState({currentAction:\"edit\",currentData:t.state.selectedRows[0]}),t.modal.show())},t.submit=function(){t.setState({modalOkBtnLoading:!0}),t.form.validateFields(function(e,n){var a,i;e?t.setState({modalOkBtnLoading:!1}):(n=(0,c.handleInParams)(n),i=\"edit\"==t.state.currentAction?(n.id=t.state.currentData.id,a=\"sysPermission/update\",\"修改成功\"):(a=\"sysPermission/insert\",\"添加成功\"),(0,u.post)({url:a,data:n,btn:function(){return t.setState({modalOkBtnLoading:!1})},success:function(e){o.default.success(i),t.modal.hide(),t.getList({pageNum:1})}}))})},t.del=function(e){if(0==t.state.selectedRows.length)e(),o.default.warning(\"请至少选择一行数据\");else{var n=t.state.selectedRows.map(function(e){return e.id}),a=t.state.selectedRows.map(function(e){return e.name});m({title:\"确认删除【\"+a.join(\"、\")+\"】吗?\",okType:\"danger\",onOk:function(){(0,u.post)({url:\"sysPermission/delete\",data:{permissionIds:n},btn:e,success:function(e){o.default.success(\"删除成功\"),t.getList({pageNum:1})}})},onCancel:e})}},t.state={table:new p.default,selectedRowKeys:[],selectedRows:[],btns:[{name:\"新增\",icon:\"plus-circle\",onClick:t.add},{name:\"修改\",icon:\"edit\",onClick:t.edit},{name:\"删除\",icon:\"minus-circle\",onClick:t.del}],authorityList:!0,modalOkBtnLoading:!1,currentAction:\"\",currentData:{}},t.columns=[{title:\"编号\",dataIndex:\"index\"},{title:\"权限名称\",dataIndex:\"name\"},{title:\"系统模块\",dataIndex:\"permGroup\"},{title:\"权限状态\",dataIndex:\"available\",render:function(e){return\"0\"==e?\"禁用\":\"1\"==e?\"启用\":\"\"}}],t.searcForm,t.modal,t.form,t}t.default=(0,r.connect)(function(e){return{authority:e.authority}})((0,s.withRouter)(f))}).call(this,n(1))}}]);","extractedComments":[]}