{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{434:function(e,t,i){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0});var n=u(i(28)),a=u(i(34));function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i(27),i(33);var r=i(20),l=i(24),s=i(25),d=i(22),p=i(21),c=u(i(31));function u(e){return e&&e.__esModule?e:{default:e}}var m=a.default.confirm,f=\"rmSpecialAirLine.add\",h=\"rmSpecialAirLine.edit\",g=\"rmSpecialAirLine.del\",y=(function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(L,e.Component),function(e,t,i){t&&o(e.prototype,t),i&&o(e,i)}(L,[{key:\"componentDidMount\",value:function(){var e=this;this.getParmaList(\"rmSpecialAirLine/queryAirLineAreaList\",function(t){return e.setState({areaList:t})}),this.getParmaList(\"rmSpecialAirLine/queryArptList\",function(t){return e.setState({arpCdCnList:t})}),this.getParmaList(\"acftEqp/queryAcftEqpList\",function(t){return e.setState({latestEqpCdList:t})}),this.getList()}},{key:\"componentWillUnmount\",value:function(){this.setState=function(e,t){}}},{key:\"getParmaList\",value:function(e,t){(0,p.post)({url:e,success:function(e){t&&\"function\"==typeof t&&t(e)}})}},{key:\"getTd\",value:function(e){return\"Y\"==e?\"是\":\"否\"}},{key:\"getSearchFormOptions\",value:function(){return[{type:\"Input\",label:\"关键字搜索\",name:\"rmSpecialAirLine\",span:6,length:5,placeholder:\"请输入区域、航线、机型搜索\"}]}},{key:\"getFormOptions\",value:function(){var e=this.state,t=e.currentAction,i=e.currentData,n=e.areaList,a=e.arpCdCnList,o=e.latestEqpCdList,r=\"add\"==t?{}:i;[\"polarFlight\",\"etops\",\"flexAirLine\",\"secRelease\",\"pbnAirLine\",\"tephrosInfluence\",\"oxygenLimit\",\"alterAirport\",\"adsRequire\",\"extCrossWater\",\"voyageLimit\",\"flyoverHk\",\"foreignLimit\",\"driftProce\",\"lowTemAirLine\"].forEach(function(e){r[e]||(r[e]=\"N\")});var l=[{key:\"Y\",text:\"是\"},{key:\"N\",text:\"否\"}],s=n.map(function(e){return e.selectItem}),d=a.map(function(e){return e.arpName}),p=o.map(function(e){return e.eqpCd});return[{type:\"Select\",label:\"区域\",name:\"area\",list:s,span:24,isHasAllSelect:!1,options:{initialValue:r.area,rules:[{required:!0,message:\"区域不可为空！\"}]}},{type:\"Select\",label:\"计划起飞站\",name:\"depArpCdCn\",list:d,span:24,isHasAllSelect:!1,options:{initialValue:r.depArpCdCn,rules:[{required:!0,message:\"计划起飞站不可为空！\"}]}},{type:\"Select\",label:\"计划到达站\",name:\"arvArpCdCn\",list:d,span:24,isHasAllSelect:!1,options:{initialValue:r.arvArpCdCn,rules:[{required:!0,message:\"计划到达站不可为空！\"}]}},{type:\"Select\",label:\"机型\",name:\"latestEqpCd\",list:p,span:24,isHasAllSelect:!1,options:{initialValue:r.latestEqpCd,rules:[{required:!0,message:\"机型不可为空！\"}]}},{type:\"Radio\",label:\"极地运行\",name:\"polarFlight\",list:l,span:24,options:{initialValue:r.polarFlight}},{type:\"Radio\",label:\"180 ETOPS\",name:\"etops\",list:l,span:24,options:{initialValue:r.etops}},{type:\"Radio\",label:\"灵活航路\",name:\"flexAirLine\",list:l,span:24,options:{initialValue:r.flexAirLine}},{type:\"Radio\",label:\"二次放行\",name:\"secRelease\",list:l,span:24,options:{initialValue:r.secRelease}},{type:\"Radio\",label:\"PBN航路\",name:\"pbnAirLine\",list:l,span:24,options:{initialValue:r.pbnAirLine}},{type:\"Radio\",label:\"是否受火山灰影响\",name:\"tephrosInfluence\",list:l,span:24,options:{initialValue:r.tephrosInfluence}},{type:\"Radio\",label:\"氧气系统限制\",name:\"oxygenLimit\",list:l,span:24,options:{initialValue:r.oxygenLimit}},{type:\"Radio\",label:\"要加飘降备降场\",name:\"alterAirport\",list:l,span:24,options:{initialValue:r.alterAirport}},{type:\"Radio\",label:\"ADS-B要求\",name:\"adsRequire\",list:l,span:24,options:{initialValue:r.adsRequire}},{type:\"Radio\",label:\"延伸跨水\",name:\"extCrossWater\",list:l,span:24,options:{initialValue:r.extCrossWater}},{type:\"Radio\",label:\"业载受航程极限限制\",name:\"voyageLimit\",list:l,span:24,options:{initialValue:r.voyageLimit}},{type:\"Radio\",label:\"是否飞越香港\",name:\"flyoverHk\",list:l,span:24,options:{initialValue:r.flyoverHk}},{type:\"Radio\",label:\"外籍有限制\",name:\"foreignLimit\",list:l,span:24,options:{initialValue:r.foreignLimit}},{type:\"Radio\",label:\"涉及释压飘降程序\",name:\"driftProce\",list:l,span:24,options:{initialValue:r.driftProce}},{type:\"Radio\",label:\"低温航线\",name:\"lowTemAirLine\",list:l,span:24,options:{initialValue:r.lowTemAirLine}}]}},{key:\"render\",value:function(){var t=this,i=this.state,n=i.table,a=i.modalOkBtnLoading,o=i.currentAction,r=i.selectedRowKeys,l=i.authorityList,d=this.getSearchFormOptions(),p={aligin:\"left\",span:6,list:[{text:\"查询\",options:\"queryOpt\",event:this.search}]},c={columns:this.columns,table:n,scroll:{x:\"1960px\"},rowSelection:{selectedRowKeys:r,onChange:function(e,i){t.onChecked(e,i)}},onChange:this.getList},u={options:{title:\"add\"==o?\"新增\":\"edit\"==o?\"修改\":\"\",bodyStyle:{height:\"400px\",overflowY:\"auto\"},okButtonProps:{loading:a}},onRef:function(e){t.modal=e},ok:this.submit.bind(this)},m=this.getFormOptions();return e.createElement(s.CardCommon,null,l&&e.createElement(s.CommonForm,{options:d,btnOptions:p,wrappedComponentRef:function(e){e&&e.props&&e.props.form&&(t.searcForm=e.props.form)}}),e.createElement(\"div\",{className:\"buttons\"},e.createElement(s.CommonBtns,{options:{shape:\"round\",size:\"small\"},btns:this.state.btns})),l&&e.createElement(s.CommonTable,{options:c,onChecked:this.onChecked}),!l&&e.createElement(\"div\",{className:\"no-authority-box\"},\"无权限查看\"),e.createElement(s.CommonModal,u,e.createElement(\"div\",{className:\"mb30\"},\"特殊航线:\"),e.createElement(\"div\",{className:\"form-grid-9\",style:{paddingLeft:\"30px\",paddingRight:\"60px\"}},e.createElement(s.CommonForm,{options:m,wrappedComponentRef:function(e){e&&e.props&&e.props.form&&(t.form=e.props.form)}}))))}}]),L);function L(e){!function(e,t){if(!(e instanceof L))throw new TypeError(\"Cannot call a class as a function\")}(this);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(L.__proto__||Object.getPrototypeOf(L)).call(this,e));return t.getList=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=t.state.table;i.setPage(e);var n=i.getParmaData();(0,p.post)({url:\"rmSpecialAirLine/queryRmSpecialAirLineListByParam\",data:n,success:function(e){if(e&&e.rows){var a=e.rows.map(function(e,t){return e.index=(n.pageNum-1)*n.pageSize+t+1,e});i.setPage({dataList:a,total:e.total,pageNum:n.pageNum,pageSize:n.pageSize}),t.setState({table:i,selectedRowKeys:[],selectedRows:[]})}}})},t.onChecked=function(e,i){t.setState({selectedRowKeys:e,selectedRows:i})},t.search=function(){t.searcForm.validateFields(function(e,i){e||(i=(0,d.handleInParams)(i),t.getList({params:i,pageNum:1}))})},t.add=function(e){e(),t.setState({currentAction:\"add\"}),t.modal.show()},t.edit=function(e){0==t.state.selectedRows.length?(e(),n.default.warning(\"必须选择一个选项才能编辑！\")):1<t.state.selectedRows.length?(e(),n.default.warning(\"只能选择一个选项！\")):(e(),t.setState({currentAction:\"edit\",currentData:t.state.selectedRows[0]}),t.modal.show())},t.submit=function(){t.setState({modalOkBtnLoading:!0}),t.form.validateFields(function(e,i){var a,o;e?t.setState({modalOkBtnLoading:!1}):(i=(0,d.handleInParams)(i),o=\"add\"==t.state.currentAction?(a=\"rmSpecialAirLine/addRmSpecialAirLine\",\"添加成功\"):(i.id=t.state.currentData.id,a=\"rmSpecialAirLine/updateRmSpecialAirLine\",\"修改成功\"),(0,p.post)({url:a,data:i,btn:function(){return t.setState({modalOkBtnLoading:!1})},success:function(e){n.default.success(o),t.modal.hide(),t.getList({pageNum:1})}}))})},t.del=function(e){if(0==t.state.selectedRows.length)e(),n.default.warning(\"请至少选择一行数据\");else{var i=t.state.selectedRows.map(function(e){return e.id}),a=t.state.selectedRows.map(function(e){return e.airLine});m({title:\"确认删除【\"+a.join(\"、\")+\"】吗?\",okType:\"danger\",onOk:function(){(0,p.post)({url:\"rmSpecialAirLine/deleteRmSpecialAirLine\",data:{ids:i},btn:e,success:function(e){n.default.success(\"删除成功\"),t.getList({pageNum:1})}})},onCancel:e})}},t.state={table:new c.default,selectedRowKeys:[],selectedRows:[],btns:[{name:\"新增\",id:f,icon:\"plus-circle\",onClick:t.add},{name:\"修改\",id:h,icon:\"edit\",onClick:t.edit},{name:\"删除\",id:g,icon:\"minus-circle\",onClick:t.del}].filter(function(t){return(0,d.isAuthority)(t.id,e.authority)}),modalOkBtnLoading:!1,currentAction:\"\",currentData:{},areaList:[],arpCdCnList:[],latestEqpCdList:[],authorityList:(0,d.isAuthority)(\"rmSpecialAirLine.list\",e.authority)},t.columns=[{title:\"序号\",dataIndex:\"index\",width:50,fixed:\"left\"},{title:\"区域\",dataIndex:\"area\",width:100,fixed:\"left\"},{title:\"航线\",dataIndex:\"airLine\",width:200,fixed:\"left\"},{title:\"机型\",dataIndex:\"latestEqpCd\",width:50,fixed:\"left\"},{title:\"极地运行\",dataIndex:\"polarFlight\",width:100,render:t.getTd},{title:\"180 ETOPS\",dataIndex:\"etops\",width:100,render:t.getTd},{title:\"灵活航路\",dataIndex:\"flexAirLine\",width:100,render:t.getTd},{title:\"二次放行\",dataIndex:\"secRelease\",width:100,render:t.getTd},{title:\"PBN航路\",dataIndex:\"pbnAirLine\",width:100,render:t.getTd},{title:\"是否受火山灰影响\",dataIndex:\"tephrosInfluence\",width:100,render:t.getTd},{title:\"氧气系统限制\",dataIndex:\"oxygenLimit\",width:100,render:t.getTd},{title:\"要加飘降备降场 \",dataIndex:\"alterAirport\",width:100,render:t.getTd},{title:\"ADS-B要求\",dataIndex:\"adsRequire\",width:100,render:t.getTd},{title:\"延伸跨水 \",dataIndex:\"extCrossWater\",width:100,render:t.getTd},{title:\"业载受航程极限限制 \",dataIndex:\"voyageLimit\",width:100,render:t.getTd},{title:\"是否飞越香港 \",dataIndex:\"flyoverHk\",width:100,render:t.getTd},{title:\"外籍有限制 \",dataIndex:\"foreignLimit\",width:100,render:t.getTd},{title:\"涉及释压飘降程序 \",dataIndex:\"driftProce\",width:100,render:t.getTd},{title:\"低温航线 \",dataIndex:\"lowTemAirLine\",width:100,render:t.getTd}],t.modal,t.form,t}t.default=(0,l.connect)(function(e){return{authority:e.authority}})((0,r.withRouter)(y))}).call(this,i(1))}}]);","extractedComments":[]}