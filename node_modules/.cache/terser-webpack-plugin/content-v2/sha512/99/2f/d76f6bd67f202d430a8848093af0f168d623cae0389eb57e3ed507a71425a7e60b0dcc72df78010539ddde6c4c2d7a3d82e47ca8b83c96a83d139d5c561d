{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{422:function(e,t,n){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0});var a=c(n(25)),o=c(n(34));function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n(24),n(33);var s=n(23),l=n(26),r=n(21),p=c(n(31));function c(e){return e&&e.__esModule?e:{default:e}}var u=o.default.confirm,d=(function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,e.Component),function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(m,[{key:\"componentDidMount\",value:function(){var e=this;this.getParmaList(\"acfData/getAllPerformanceType\",function(t){e.setState({performanceType:t.map(function(e){return e.performanceType})})}),this.getParmaList(\"acfData/queryPerformanceType\",function(t){return e.setState({performanceTypeMap:t})}),this.getList()}},{key:\"componentWillUnmount\",value:function(){this.setState=function(e,t){}}},{key:\"getParmaList\",value:function(e,t){(0,r.post)({url:e,success:function(e){t&&\"function\"==typeof t&&t(e)}})}},{key:\"getSearchFormOptions\",value:function(){return[{type:\"Input\",label:\"机场\",name:\"icaoCode\",span:6,length:2,placeholder:\"四字码，如：ZWAT\",options:{rules:[{pattern:/^[A-Z]{4}$/,message:\"请输入正确的四字码！\"}]}},{type:\"Select\",label:\"机型\",name:\"performanceType\",list:this.state.performanceType,span:6,length:2}]}},{key:\"getFormOptions\",value:function(){var e=this,t=this.state,n=t.currentAction,a=t.currentData,o=t.performanceType,i=t.performanceTypeMap,s=t.subPerformanceType,l=\"add\"==n?{}:a,r=[];return l.subPerformanceType&&(r=l.subPerformanceType.split(\",\")),[{type:\"Input\",label:\"机场\",name:\"icaoCode\",span:24,placeholder:\"四字码，如：ZWAT\",options:{initialValue:l.icaoCode,rules:[{required:!0,message:\"机场不可为空！\"},{pattern:/^[A-Z]{4}$/,message:\"请输入正确的四字码！\"}]}},{type:\"Select\",label:\"性能机型\",name:\"performanceType\",list:o,span:24,isHasAllSelect:!1,onSelect:function(t){for(var n in i)n==t&&e.setState({subPerformanceType:i[n]})},options:{initialValue:l.performanceType,rules:[{required:!0,message:\"性能机型不可为空！\"}]}},{type:\"MultipleSelect\",label:\"性能子机型\",name:\"subPerformanceType\",list:s,span:24,options:{initialValue:r,rules:[{required:!0,message:\"性能子机型不可为空！\"},{validator:function(e,t,n){t&&t.value&&0==t.value.length&&n(\"性能子机型不可为空！\"),n()}}]}},{type:\"Input\",label:\"起飞常用跑道\",name:\"takeoffCommonUseRwy\",span:24,placeholder:\"多条跑道请用英文逗号隔开\",options:{initialValue:l.takeoffCommonUseRwy}},{type:\"Input\",label:\"原因备注\",name:\"takeoffCommonUseRwyRemark\",span:24,options:{initialValue:l.takeoffCommonUseRwyRemark}},{type:\"Input\",label:\"起飞不可用跑道\",name:\"takeoffUnuseRwy\",span:24,placeholder:\"多条跑道请用英文逗号隔开\",options:{initialValue:l.takeoffUnuseRwy}},{type:\"Input\",label:\"原因备注\",name:\"takeoffUnuseRwyRemark\",span:24,options:{initialValue:l.takeoffUnuseRwyRemark}},{type:\"Input\",label:\"落地常用跑道\",name:\"landCommonUseRwy\",span:24,placeholder:\"多条跑道请用英文逗号隔开\",options:{initialValue:l.landCommonUseRwy}},{type:\"Input\",label:\"原因备注\",name:\"landCommonUseRwyRemark\",span:24,options:{initialValue:l.landCommonUseRwyRemark}},{type:\"Input\",label:\"落地不可用跑道\",name:\"landUnuseRwy\",span:24,placeholder:\"多条跑道请用英文逗号隔开\",options:{initialValue:l.landUnuseRwy}},{type:\"Input\",label:\"原因备注\",name:\"landUnuseRwyRemark\",span:24,options:{initialValue:l.landUnuseRwyRemark}}]}},{key:\"render\",value:function(){var t=this,n=this.state,a=n.table,o=n.modalOkBtnLoading,i=n.currentAction,r=n.selectedRowKeys,p=this.getSearchFormOptions(),c={aligin:\"left\",span:6,list:[{text:\"查询\",options:\"queryOpt\",event:this.search}]},u={columns:this.columns,table:a,scroll:{x:\"max-content\"},rowSelection:{selectedRowKeys:r,onChange:function(e,n){t.onChecked(e,n)},onSelect:l.onSelect.bind(this),onSelectAll:l.onSelectAll.bind(this)},onChange:this.getList},d=(a.pageNum,a.pageSize,a.total,this.getList,{options:{title:\"add\"==i?\"新增\":\"edit\"==i?\"修改\":\"\",bodyStyle:{height:\"400px\",overflowY:\"auto\"},okButtonProps:{loading:o}},onRef:function(e){t.modal=e},ok:this.submit.bind(this)}),m=this.getFormOptions();return e.createElement(s.CardCommon,null,e.createElement(s.CommonForm,{options:p,btnOptions:c,wrappedComponentRef:function(e){e&&e.props&&e.props.form&&(t.searcForm=e.props.form)}}),e.createElement(\"div\",{className:\"buttons\"},e.createElement(s.CommonBtns,{options:{shape:\"round\",size:\"small\"},btns:this.state.btns})),e.createElement(s.CommonTable,{options:u,onChecked:this.onChecked}),e.createElement(s.CommonModal,d,e.createElement(\"div\",{className:\"form-grid-7\",style:{paddingLeft:\"30px\",paddingRight:\"60px\"}},e.createElement(s.CommonForm,{options:m,wrappedComponentRef:function(e){e&&e.props&&e.props.form&&(t.form=e.props.form)}}))))}}]),m);function m(e){!function(e,t){if(!(e instanceof m))throw new TypeError(\"Cannot call a class as a function\")}(this);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e));return t.getList=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.state.table;n.setPage(e);var a=n.getParmaData();(0,r.post)({url:\"rwyRule/queryRwyRuleListByParam\",data:a,success:function(e){if(e&&e.rows){var o=e.rows.map(function(e,t){return e.index=(a.pageNum-1)*a.pageSize+t+1,e});n.setPage({dataList:o,total:e.total,pageNum:a.pageNum,pageSize:a.pageSize}),t.setState({table:n,selectedRowKeys:[],selectedRows:[]})}}})},t.onChecked=function(e,n){t.setState({selectedRowKeys:e,selectedRows:n})},t.search=function(){t.searcForm.validateFields(function(e,n){e||(n=(0,l.handleInParams)(n),t.getList({params:n,pageNum:1}))})},t.add=function(e){e(),t.setState({currentAction:\"add\"}),t.modal.show()},t.edit=function(e){if(0==t.state.selectedRows.length)e(),a.default.warning(\"必须选择一个选项才能编辑！\");else if(1<t.state.selectedRows.length)e(),a.default.warning(\"只能选择一个选项！\");else{e();var n=t.state.selectedRows[0];if(t.setState({currentAction:\"edit\",currentData:n}),n.performanceType)for(var o in t.state.performanceTypeMap)o==n.performanceType&&t.setState({subPerformanceType:t.state.performanceTypeMap[o]});t.modal.show()}},t.submit=function(){t.setState({modalOkBtnLoading:!0}),t.form.validateFields(function(e,n){if(e)t.setState({modalOkBtnLoading:!1});else{for(var o in n=(0,l.handleInParams)(n))if(\"subPerformanceType\"==o){n[o].value&&(n[o]=n[o].value);var i=n[o].indexOf(\"全部\");-1<i&&n[o].splice(i,1)}var s,p;p=\"add\"==t.state.currentAction?(s=\"rwyRule/insert\",\"添加成功\"):(n.id=t.state.currentData.id,s=\"rwyRule/update\",\"修改成功\"),(0,r.post)({url:s,data:n,btn:function(){return t.setState({modalOkBtnLoading:!1})},success:function(e){a.default.success(p),t.modal.hide(),t.getList({pageNum:1})}})}})},t.del=function(e){if(0==t.state.selectedRows.length)e(),a.default.warning(\"请至少选择一行数据\");else{var n=t.state.selectedRows.map(function(e){return e.id});u({title:\"确认删除选项吗?\",okType:\"danger\",onOk:function(){(0,r.post)({url:\"rwyRule/delete\",data:{ids:n},btn:e,success:function(e){a.default.success(\"删除成功\"),t.getList({pageNum:1})}})},onCancel:e})}},t.export=function(e){if(0==t.state.selectedExport.length)e(),a.default.warning(\"未选中选项\");else{var n=t.state.selectedExport.map(function(e){return e.id});u({title:\"确定导出选中的跑道规则吗？\",onOk:function(){(0,r.post)({url:\"rwyRule/export\",data:{ids:n},btn:e,success:function(e){(0,l.downloadFile)(e,\"跑道规则表\")}})},onCancel:e})}},t.exportAll=function(e){var n=t;u({title:\"确定导出全部跑道规则吗？\",onOk:function(){var t=(0,l.handleInParams)(n.searcForm.getFieldsValue());(0,r.post)({url:\"rwyRule/export\",data:t,btn:e,success:function(e){(0,l.downloadFile)(e,\"跑道规则表\")}})},onCancel:e})},t.state={table:new p.default,selectedRowKeys:[],selectedRows:[],selectedExport:[],btns:[{name:\"新增\",icon:\"plus-circle\",onClick:t.add},{name:\"修改\",icon:\"edit\",onClick:t.edit},{name:\"删除\",icon:\"minus-circle\",onClick:t.del},{name:\"导出\",icon:\"export\",onClick:t.export},{name:\"导出全部\",icon:\"export\",onClick:t.exportAll}],modalOkBtnLoading:!1,currentAction:\"\",currentData:{},performanceType:[],performanceTypeMap:{},subPerformanceType:[]},t.columns=[{title:\"序号\",dataIndex:\"index\",width:50},{title:\"机场\",dataIndex:\"icaoCode\",width:100},{title:\"性能机型\",dataIndex:\"performanceType\",width:100},{title:\"性能子机型\",dataIndex:\"subPerformanceType\",width:100},{title:\"起飞常用跑道\",dataIndex:\"takeoffCommonUseRwy\",width:120,isTooltip:!0},{title:\"原因备注\",dataIndex:\"takeoffCommonUseRwyRemark\",width:120,isTooltip:!0},{title:\"起飞不可用跑道\",dataIndex:\"takeoffUnuseRwy\",width:120,isTooltip:!0},{title:\"原因备注\",dataIndex:\"takeoffUnuseRwyRemark\",width:120,isTooltip:!0},{title:\"落地常用跑道\",dataIndex:\"landCommonUseRwy\",width:120,isTooltip:!0},{title:\"原因备注\",dataIndex:\"landCommonUseRwyRemark\",width:120,isTooltip:!0},{title:\"落地不可用跑道\",dataIndex:\"landUnuseRwy\",width:120,isTooltip:!0},{title:\"原因备注\",dataIndex:\"landUnuseRwyRemark\",width:120,isTooltip:!0},{title:\"更新人\",dataIndex:\"updateUser\",width:100},{title:\"更新时间\",dataIndex:\"updateTime\",width:150}],t.modal,t.form,t}t.default=d}).call(this,n(1))}}]);","extractedComments":[]}